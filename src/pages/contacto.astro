---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import ContactCTA from "../components/ContactCTA.astro";
import { getBusinessInfo } from "../lib/sanity.js";

const business = await getBusinessInfo();
const socials = [
  { label: "Facebook", url: business?.facebookUrl || "" },
  { label: "Instagram", url: business?.instagramUrl || "" },
  { label: "TikTok", url: business?.tiktokUrl || "" },
].filter((x) => Boolean(x.url));
---

<Layout title="Contacto | Podologos Via Morelos Tulpetlac" description="Contactanos para agendar y resolver dudas sobre nuestros servicios.">
  <Header />

  <main class="mx-auto max-w-6xl px-4 py-10">
    <h1 class="text-3xl font-bold tracking-tight md:text-4xl">Contacto</h1>
    <p class="mt-2 text-slate-600 dark:text-slate-300">Estamos para ayudarte. Resolvemos dudas y te orientamos para tu cita.</p>

    <div class="mt-8 grid gap-6 lg:grid-cols-2">
      <ContactCTA business={business} />
      <section class="rounded-2xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-950">
        <h2 class="text-xl font-semibold">Redes sociales</h2>
        {socials.length === 0 ? (
          <p class="mt-4 text-sm text-slate-600 dark:text-slate-300">Aun no hay redes configuradas.</p>
        ) : (
          <div class="mt-4 grid gap-3">
          {socials.some((s) => s.label === "Facebook") && (
          <a href={business?.facebookUrl} target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-3 rounded-xl border border-slate-200 px-4 py-3 text-sm font-medium hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-900">
            <span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-4 w-4" fill="currentColor"><path d="M13 9h3V6h-3c-2.8 0-5 2.2-5 5v2H6v3h2v5h3v-5h3l1-3h-4v-2c0-1.1.9-2 2-2z"/></svg>
            </span>
            <span>Facebook</span>
          </a>
          )}
          {socials.some((s) => s.label === "Instagram") && (
          <a href={business?.instagramUrl} target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-3 rounded-xl border border-slate-200 px-4 py-3 text-sm font-medium hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-900">
            <span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-300">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-4 w-4" fill="currentColor"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm10.5 1.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/></svg>
            </span>
            <span>Instagram</span>
          </a>
          )}
          {socials.some((s) => s.label === "TikTok") && (
          <a href={business?.tiktokUrl} target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-3 rounded-xl border border-slate-200 px-4 py-3 text-sm font-medium hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-900">
            <span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-slate-200 text-slate-800 dark:bg-slate-800 dark:text-slate-100">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-4 w-4" fill="currentColor"><path d="M14 3c.4 1.7 1.8 3 3.5 3.2V9c-1.4-.1-2.6-.6-3.5-1.4V14a6 6 0 1 1-5.4-6v2.8a3.2 3.2 0 1 0 2.6 3.2V3H14z"/></svg>
            </span>
            <span>TikTok</span>
          </a>
          )}
        </div>
        )}
      </section>
    </div>
  </main>

  <Footer />
</Layout>
